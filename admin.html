<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Admin - A.S. Barber√≠a</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .metric-card { background: #f5f5f5; padding: 20px; border-radius: 10px; text-align: center; }
        .metric-value { font-size: 2rem; font-weight: bold; color: #2A3B5F; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #2A3B5F; color: white; }
    </style>
</head>
<body>
    <h1>üìä Panel Administrativo - A.S. Barber√≠a</h1>
    
    <div class="metrics">
        <div class="metric-card">
            <div class="metric-value" id="reservasHoy">0</div>
            <div>Reservas Hoy</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="reservasSemana">0</div>
            <div>Esta Semana</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="ingresosMes">$0</div>
            <div>Ingresos Mes</div>
        </div>
    </div>
    
    <h2>Pr√≥ximas Reservas</h2>
    <table id="reservasTable">
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Cliente</th>
                <th>Servicio</th>
                <th>Tel√©fono</th>
            </tr>
        </thead>
        <tbody id="reservasBody">
            <!-- Las reservas se cargar√°n aqu√≠ -->
        </tbody>
    </table>
    
    <script>
        // Conectar a Google Sheets para obtener datos
        async function cargarReservas() {
            // URL p√∫blica de tu Google Sheet (la crearemos en el paso 4)
            const sheetURL = 'https://docs.google.com/spreadsheets/d/TU_ID/gviz/tq?tqx=out:json';
            
            try {
                const response = await fetch(sheetURL);
                const text = await response.text();
                const json = JSON.parse(text.substr(47).slice(0, -2));
                
                // Procesar datos
                const rows = json.table.rows;
                let reservasHoy = 0;
                let html = '';
                
                rows.forEach(row => {
                    const fecha = row.c[3]?.v || '';
                    const hora = row.c[4]?.v || '';
                    const cliente = row.c[1]?.v || '';
                    const servicio = row.c[5]?.v || '';
                    const telefono = row.c[2]?.v || '';
                    
                    html += `<tr>
                        <td>${fecha}</td>
                        <td>${hora}</td>
                        <td>${cliente}</td>
                        <td>${servicio}</td>
                        <td>${telefono}</td>
                    </tr>`;
                    
                    // Contar reservas de hoy
                    const hoy = new Date().toISOString().split('T')[0];
                    if (fecha === hoy) reservasHoy++;
                });
                
                document.getElementById('reservasBody').innerHTML = html;
                document.getElementById('reservasHoy').textContent = reservasHoy;
                document.getElementById('reservasSemana').textContent = rows.length;
                document.getElementById('ingresosMes').textContent = `$${rows.length * 1500}`;
                
            } catch (error) {
                console.error('Error cargando reservas:', error);
                document.getElementById('reservasBody').innerHTML = 
                    '<tr><td colspan="5">Cargando datos...</td></tr>';
            }
        }
        
        // Actualizar cada 30 segundos
        cargarReservas();
        setInterval(cargarReservas, 30000);
    </script>
</body>
</html>